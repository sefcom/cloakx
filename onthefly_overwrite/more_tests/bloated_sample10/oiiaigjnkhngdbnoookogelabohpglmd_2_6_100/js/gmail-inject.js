var globalRoot="undefined"!=typeof global&&null!==global?global:window,hns=globalRoot.hns=globalRoot.hns2=function(t,e){var i,s,r,n,a=t.split("."),o=globalRoot,h="",u=a.length-1;e=e||{};i=a[u];for(var l=0;u>l;l++){h=a[l];o[h]=o[h]||{};o=o[h]}if(o[i]&&e!==o[i]){s=o[i];r=[];for(var p in e)if(e.hasOwnProperty(p))if("object"==typeof s[p]){e[p]!==s[p]&&r.push({qSource:e[p],qTarget:s[p]});for(;r.length>0;){n=r.shift();for(var c in n.qSource)n.qSource.hasOwnProperty(c)&&("object"!=typeof n.qSource[c]||"object"!=typeof n.qTarget[c]||n.qSource[c]&&void 0!==n.qSource[c].classList&&void 0!==n.qSource[c].nodeType?n.qTarget[c]=n.qSource[c]:n.qSource[c]!==n.qTarget[c]&&r.push({qSource:n.qSource[c],qTarget:n.qTarget[c]}))}}else s[p]=e[p]}else o[i]=e;"undefined"!=typeof hubspot&&hubspot.updateDependencies&&hubspot.updateDependencies(t);return o[i]};globalRoot.hmerge=function(t,e){for(var i in e)"object"!=typeof t[i]||null===e[i]||e[i].jquery?t[i]=e[i]:this.hmerge(t[i],e[i]);return t};hns("hubspot");!function(){function t(){if("undefined"!=typeof hubspot._cached_debug_define_enabled)return hubspot._cached_debug_define_enabled;if(window.HUBSPOT_DEBUG_DEFINE===!0)rval=!0;else{var t="test";try{localStorage.setItem(t,t);localStorage.removeItem(t);rval="true"===localStorage.HUBSPOT_DEBUG_DEFINE}catch(e){rval=!1}}hubspot._cached_debug_define_enabled=rval;return rval}function e(t){var e;e=i(t);if(t.ns){h[t.ns]=e;window.hns2(t.ns,e)}}function i(e){var i,s,r=[],n=e.allDeps;for(i=0;i<n.length;i++)r[i]=hubspot.modules.getNamespace(n[i]);if(t())s="function"==typeof e.module?e.module.apply(this,r):e.module;else try{s="function"==typeof e.module?e.module.apply(this,r):e.module}catch(a){var o=e.ns||p;u[o]=!0;setTimeout(function(){o.length>0&&console.log("Error while defining hubspot module:",o);throw a},0);return}return s}function s(t){var e,i;for(e=0;e<a.length;e++){i=a[e];if(i.depsDict[t])return!0}return!1}function r(t,i){for(var s,n,h=i.deps,u=i.depsDict,l=h.length,p=[];l--;){n=h[l];if(hubspot.modules.getNamespace(n)){h.splice(l,1);delete u[n]}o[n]&&p.push(n)}h.length>0?a.push(i):e(i);for(var l=0;l<p.length;l++){n=p[l];s=o[n];if(s){delete o[n];r(n,s)}}}function n(t,e){var i=document.createElement("script");i.setAttribute("type","text/javascript");i.setAttribute("src",t);"function"==typeof e&&(i.onload=function(){return e(!0,t)});document.head.appendChild(i)}hubspot=hubspot||{};hubspot.modules=hubspot.modules||{};var a=[],o={},h={},u={},l={},p="<hubspot.require>",c=1;hubspot.modules.getNamespace=function(t){if(h[t])return h[t];var e,i=t.split("."),s=i.length,r=window;for(e=0;s>e;++e){r=r[i[e]];if(!r)break}return r};hubspot.getDeferredModules=function(){return a};hubspot.getIdleModules=function(){return o};hubspot.getLoadedModules=function(){return h};hubspot.getErroredModules=function(){return u};hubspot.getAllModuleDefinitions=function(){return l};var d=function(){return p.replace(">"," "+c++ +">")};hubspot.getBlockingModules=function(){for(var t,e=a,i=[],s={},r={},n=e.length;n--;){var o=e[n];if(o&&o.deps){r[o.ns]=!0;for(var h=o.deps.length;h--;)s[o.deps[h]]=!0}}for(t in s)r[t]||i.push(t);return i};hubspot.updateDependencies=function(t){var i,s,r=[];for(i=0;i<a.length;i++){moduleDef=a[i];if(moduleDef.depsDict[t]){delete moduleDef.depsDict[t];deps=moduleDef.deps;for(s=0;s<deps.length;s++)if(deps[s]===t){deps.splice(s,1);break}if(0===deps.length){a.splice(i,1);r.push(moduleDef);i--}}}for(i=0;i<r.length;i++)e(r[i])};hubspot.defineHelper=function(t,e,i,n){var a,h={},u=0;if("string"==typeof e)throw new Error("hubspot.define/require must be provided an array of dependencies, not a string");if("boolean"!=typeof n)throw new Error("hubspot.defineHelper must be called with the isEagerDefinition flag");for(var u=0;u<e.length;u++){dep=e[u];h[dep]=dep}a={ns:t,allDeps:e.slice(),deps:e,depsDict:h,module:i};l[t||d()]=a;null==t||n||s(t)?r(t,a):o[t]=a};hubspot.defineEager=function(t,e,i){hubspot.defineHelper(t,e,i,!0)};hubspot.defineLazy=function(t,e,i){hubspot.defineHelper(t,e,i,!1)};hubspot.define=hubspot.defineEager;hubspot.require=function(t,e){hubspot.defineEager(null,t,e)};hubspot.modules.loadDebuggingUtils=function(t){console.log("Dynamically loading the huspot.require debugging scripts...");var e="//static.hsappstatic.net";hubspot&&hubspot.bender&&hubspot.bender.staticDomainPrefix&&(e=hubspot.bender.staticDomainPrefix);n(e+"/HeadJS/static-2.69/bundles/module-debugging.js",t)};hubspot.modules.stateOfTheWorld=function(){hubspot.modules.loadDebuggingUtils(function(){hubspot.modules.stateOfTheWorld()})}}();hubspot.define=hubspot.defineLazy;(function(){window.SIG_inject={Classes:{}};window.__bind=function(t,e){return function(){return t.apply(e,arguments)}};window.__isString=function(t){return"[object String]"===Object.prototype.toString.call(t)};window.__isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}}).call(this);(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.sendParent=e(this.sendParent,this);this.send=e(this.send,this);this.getUserKey=e(this.getUserKey,this);this.init=e(this.init,this)}t.prototype.init=function(){this.getUserKey();return this};t.prototype._handleLoad=function(t){var e,i,s,r,n;e=(null!=(s=window.GLOBALS)?s[10]:void 0)||(null!=(r=window.gbar)&&null!=(n=r._CONFIG)?n[0][10][5]:void 0);window.postMessage({sender:"SIG_EXTENSION",type:"XHR_USER_KEY_REQUEST"},"*");if(null!=e){i={sender:"SIG_EXTENSION",type:"XHR_EMAIL_DETECTION",email:e};i=JSON.parse(JSON.stringify(i));window.postMessage(i,"*");window.parent.postMessage(i,"*")}};t.prototype._handleMessage=function(t){var e;e=t.data;if("SIG_EXTENSION"===e.sender&&"XHR_USER_KEY_RESPONSE"===e.type){SIG_inject.user_key=e.user_key;SIG_inject.host=e.host;SIG_inject.all_domains=e.all_domains;SIG_inject.slugs=e.slugs;SIG_inject.user_id=e.user_id;SIG_inject.blacklist=e.blacklist}};t.prototype.getUserKey=function(){this._handleLoad();window.addEventListener("load",this._handleLoad,!0);window.addEventListener("message",this._handleMessage,!1);return this};t.prototype.send=function(t,e){window.postMessage({sender:"SIG_EXTENSION",type:t,tracker_data:e},"*");return this};t.prototype.sendParent=function(t,e){window.parent.postMessage({sender:"SIG_EXTENSION",type:t,tracker_data:e},"*");return this};return t}();SIG_inject.Classes.ExtensionMessenger=t;SIG_inject.extensionMessenger=new t;SIG_inject.extensionMessenger.init()}).call(this);(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};hubspot.require(["sidekick.chrome.utils.TrackerUtils"],function(e){var i;i=function(){function i(i){this.slugs=i.slugs,this.userId=i.userId,this.parser=i.parser;this._generatePixelPattern=t(this._generatePixelPattern,this);this._generateTrackedLinkUrl=t(this._generateTrackedLinkUrl,this);this._generateTrackedLinkData=t(this._generateTrackedLinkData,this);this._wrapLink=t(this._wrapLink,this);this._insertPixel=t(this._insertPixel,this);this._createNewPixel=t(this._createNewPixel,this);this._validateEmailData=t(this._validateEmailData,this);this._findExistingTrackers=t(this._findExistingTrackers,this);this._matchOwnPixels=t(this._matchOwnPixels,this);this.logExistingTrackers=t(this.logExistingTrackers,this);this._doWrapLinks=t(this._doWrapLinks,this);this.wrapLinks=t(this.wrapLinks,this);this.setGmailThreadId=t(this.setGmailThreadId,this);this.setGmailMessageId=t(this.setGmailMessageId,this);this.generatePixel=t(this.generatePixel,this);this.toJSON=t(this.toJSON,this);this.isDirty=!1;this.clientId=1;this.linkData=[];this.emailData=this.parser.getEmailData();this.utils=new e;this._validateEmailData()}var s,r,n,a,o,h;n="(no subject)";s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";h=/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)\#?(?:[\.\!\/\\\w]*))?)/;o=/^(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i;a=["app.getsidekick.com/link","mailto:","tel:","fax:"];r={hasName:/(.+\s?[^\s]+)\s?<(.+)>/,hasEmail:/.+/};i.prototype.toJSON=function(){var t,e;e=function(t){return function(t){var e,i,s;s=t.match(r.hasName);i=t.match(r.hasEmail);null!=s?e={email:s[2],name:s[1]}:null!=i&&(e={email:i[0]});return e}}(this);return{key:this.emailData.key,content:{existing_trackers:this.parser.getExistingTrackers(),open_slug:this.slugs.open,email:{client_id:this.clientId,template_id:this.emailData.template_id,gmail_id:this.emailData.gmail_id||"",gmail_thread_id:this.emailData.gmailThreadId,from:{email:this.emailData.from_email},subject:this.emailData.subject,to:function(){var i,s,r,n;r=this.emailData.to;n=[];for(i=0,s=r.length;s>i;i++){t=r[i];n.push(e(t))}return n}.call(this),bcc:function(){var i,s,r,n;r=this.emailData.bcc;n=[];for(i=0,s=r.length;s>i;i++){t=r[i];n.push(e(t))}return n}.call(this),cc:function(){var i,s,r,n;r=this.emailData.cc;n=[];for(i=0,s=r.length;s>i;i++){t=r[i];n.push(e(t))}return n}.call(this)},links:this.linkData}}};i.prototype.generatePixel=function(){this.emailData.key=this._createNewPixel();return this};i.prototype.setGmailMessageId=function(t){this.emailData.gmail_id=t;return this};i.prototype.setGmailThreadId=function(t){this.emailData.gmailThreadId=t;return this};i.prototype.wrapLinks=function(){var t,e,i,s,r,n,a,o,h,u,l;t=this.parser.getBody();if(!this.parser.getExpandedThread()){e=t.getElementsByTagName("a");return this._doWrapLinks(e)}s=t.children[0].children;for(r=0,a=s.length;a>r;r++){i=s[r];if(!i.classList.contains("gmail_extra")){e=i.getElementsByTagName("a");return this._doWrapLinks(e)}}if(this.parser.isReply()){u=this.parser.getTrimmed();for(n=0,o=u.length;o>n;n++){h=u[n];l=h.getElementsByTagName("a");return this._doWrapLinks(l)}}return[]};i.prototype._doWrapLinks=function(t){var e,i,s,r;r=[];for(e=0,i=t.length;i>e;e++){s=t[e];r.push(this._wrapLink(s))}return r};i.prototype.logExistingTrackers=function(){var t,e,i,s,r,n,a;a=this.parser,r=a.getThread,s=a.getBody,n=a.isReply;if(n()){t=function(){var t,i,n,a;n=[r(),s()];a=[];for(t=0,i=n.length;i>t;t++){e=n[t];e&&a.push(e)}return a}();i=this._findExistingTrackers(t,this._matchOwnPixels());i.length&&this.parser.addExistingTrackers(i);this.isDirty=!0;return this}};i.prototype._matchOwnPixels=function(){var t;t=this._generatePixelPattern(this.userId);return function(e){return e.src.match(t)}};i.prototype._findExistingTrackers=function(t,e){var i,s,r,n,a,o,h,u,l;h=[];for(s=0,u=t.length;u>s;s++){i=t[s];n=i.querySelectorAll("img");for(a=0,l=n.length;l>a;a++){r=n[a];if(e(r)){o=e(r)[1];null!=o&&h.push(o)}}}return h};i.prototype._validateEmailData=function(){(null===this.emailData.subject||"undefined"===this.emailData.subject||""===this.emailData.subject)&&(this.emailData.subject=n);return this};i.prototype._createNewPixel=function(){var t,e;t=this.utils.generateUUID();e=this.utils.generateOpenTrackerURL({primaryId:t,secondaryId:this.userId,domain:this.slugs.open});this._insertPixel(this.utils.generateImgTag(e));return t};i.prototype._insertPixel=function(t){var e,i,s;e=this.parser.getBody();s=null!=(i=e.children[0])?i.querySelector(".gmail_extra"):void 0;s?s.insertAdjacentHTML("beforebegin",t):e.children[0].insertAdjacentHTML("beforeend",t);this.isDirty=!0;return this};i.prototype._wrapLink=function(t){var e,i,s,r,n,u,l;n=t.textContent;l=t.href;u=a.concat(window.SIG_inject.all_domains);u=u.concat(window.SIG_inject.blacklist.domains);for(i=0,s=u.length;s>i;i++){e=u[i];if(-1!==l.indexOf(e))return{originalUrl:l,blacklistType:"BLACKLISTED_DOMAIN"}}if(l===n)return{originalUrl:l,blacklistType:"LINK_TEXT_IS_URL"};if(n.match(o))return{originalUrl:l,blacklistType:"SCHEMELESS_URL"};if(!l.match(h))return{originalUrl:l,blacklistType:"INVALID_URL"};r=this._generateTrackedLinkData({target:l,text:t.innerHTML});t.href=this._generateTrackedLinkUrl({primaryId:r.key||this.emailData.key,secondaryId:this.userId,domain:this.slugs.click,target:encodeURIComponent(l)});this.isDirty=!0;this.linkData.push(r);return{originalUrl:l,blacklistType:null}};i.prototype._generateTrackedLinkData=function(t){var e,i,s;i=t.target,s=t.text;return e={target:i,text:s}};i.prototype._generateTrackedLinkUrl=function(t){var e,i,s,r;i=t.primaryId,s=t.secondaryId,e=t.domain,r=t.target;return e+"?t="+r+"&si="+s+"&pi="+i};i.prototype._generatePixelPattern=function(t){return RegExp("(?:si="+t+"&(?:amp;)?pi=([0-9A-z-]*)|pi=([0-9A-z-]*)&(?:amp;)?si="+t+")","i")};return i}();return SIG_inject.Classes.TrackerGenerator=i})}).call(this);(function(){var t,e,i;t=XMLHttpRequest.prototype;e=t.open;i=t.send;t.open=function(t,i){this._method=t;this._url=i;return e.apply(this,arguments)};t.send=function(t){var e,s,r,n,a,o,h,u,l,p,c,d;p=performance.now();h=!1;a=!1;o=!1;n=!1;r=function(t){return function(){var e;e=performance.now()-p;setTimeout(function(){var t;t=h?"tracked":a?"draft":n?"blacklisted":o?"untracked":"passthrough";return SIG_inject.extensionMessenger.send("TRACK_XHR_TIMING",{namespace:t,time:e})},3);return i.apply(t,arguments)}}(this);d=this;try{if(null!=this._url&&null!=t){e=new SIG_inject.Classes.XHRParser(this._url,t);o=e.isEmail();if(!o)return r.apply(this,arguments);a=e.isDraft();if(a===!1){if(e.isHTML()){c=new SIG_inject.Classes.TrackerGenerator({userId:SIG_inject.user_id,slugs:SIG_inject.slugs,parser:e});e.getBody().innerHTML.indexOf(SIG_inject.host+"/invite/accept")>-1&&window.parent.postMessage({sender:"SIG_EXTENSION",type:"INVITE_SIGNATURE"},"*");h=e.isTracked();n=e.isBlacklisted();l=e.shouldWrapLinks();if(n){console.debug("One or more recipients is blacklisted, not tracking.");return r.apply(this,arguments)}if(h){console.debug("Tracking email");c.logExistingTrackers();c.generatePixel();if(l){u=c.wrapLinks();window.parent.postMessage({sender:"SIG_EXTENSION",type:"TRACK_LINKS_WRAPPED",content:u},"*")}}}(null!=c?c.isDirty:void 0)&&(t=e.getEncoded("postData"))}this.dataParser=e;this.trackerGenerator=c;d.addEventListener("load",function(t){return function(){var e,i,s,r,n,a,o,h;try{if(null==t.dataParser)return;o=t.responseText.toString();i=function(t){var e,i,s,r;e=o.indexOf(t);if(-1===e)return null;s=e+t.length;r=o.substring(s,s+25);return null!=(i=r.match(/[0-9A-z]*/))?i[0]:void 0};if(t.dataParser.isDraft())s=i('our message has been saved.",["');else{s=i('our message has been sent.",["');h=i('["csd","')}if(null!=s){null!=(r=t.trackerGenerator)&&r.setGmailMessageId(s);null!=(n=t.trackerGenerator)&&n.setGmailThreadId(h||s)}null!=t.trackerGenerator&&(null!=(a=t.dataParser)?a.isTracked():void 0)&&SIG_inject.extensionMessenger.send("TRACKER_CREATE",{content:t.trackerGenerator.toJSON()})}catch(u){e=u;try{SIG_inject.extensionMessenger.send("TRACK_EXCEPTION",{message:"Error in XHRIntercept onload: "+e.message,stack:e.stack});console.error(e)}catch(u){}}}}(this))}}catch(_){s=_;try{SIG_inject.extensionMessenger.send("TRACK_EXCEPTION",{message:"Error in XHRIntercept send: "+s.message,stack:s.stack});console.error(s)}catch(_){}}return r.apply(this,arguments)}}).call(this);(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};SIG_inject.Classes.XHRParser=t=function(){function t(t,i){this.getEncoded=e(this.getEncoded,this);this.getEmailData=e(this.getEmailData,this);this.extractEmail=e(this.extractEmail,this);this.getguser=e(this.getguser,this);this.isReply=e(this.isReply,this);this.isNewCompose=e(this.isNewCompose,this);this.isHTML=e(this.isHTML,this);this.shouldWrapLinks=e(this.shouldWrapLinks,this);this.isTracked=e(this.isTracked,this);this.isBlacklisted=e(this.isBlacklisted,this);this.isEmail=e(this.isEmail,this);this.isDraft=e(this.isDraft,this);this.addBCC=e(this.addBCC,this);this.addExistingTrackers=e(this.addExistingTrackers,this);this.setSubject=e(this.setSubject,this);this.getExistingTrackers=e(this.getExistingTrackers,this);this.getSubject=e(this.getSubject,this);this.getTo=e(this.getTo,this);this.getFrom=e(this.getFrom,this);this.getCC=e(this.getCC,this);this.getBCC=e(this.getBCC,this);this.getExpandedThread=e(this.getExpandedThread,this);this.getThread=e(this.getThread,this);this.getQuotedReplies=e(this.getQuotedReplies,this);this.getTrimmed=e(this.getTrimmed,this);this.getBody=e(this.getBody,this);this._replaceExistingTrackers=e(this._replaceExistingTrackers,this);this._parseExpandedThread=e(this._parseExpandedThread,this);this._addBCC=e(this._addBCC,this);this._replaceSubject=e(this._replaceSubject,this);this._parseTo=e(this._parseTo,this);this._parseCC=e(this._parseCC,this);this._parseBCC=e(this._parseBCC,this);this._parseSubject=e(this._parseSubject,this);this._parseFrom=e(this._parseFrom,this);this._parseThread=e(this._parseThread,this);this._parseQuotedReplies=e(this._parseQuotedReplies,this);this._parseTrimmed=e(this._parseTrimmed,this);this._parseBody=e(this._parseBody,this);this._parseQueryString=e(this._parseQueryString,this);this._stripCustomParams=e(this._stripCustomParams,this);this._encodePostData=e(this._encodePostData,this);this._replacePostValue=e(this._replacePostValue,this);this._isDirty=!1;this._rawUrl=t;this._rawPostData=i;this._url=this._parseQueryString(this._rawUrl);this._postData=this._parseQueryString(this._rawPostData);this.existingTrackers=[]}var i,s;s={trimmed:"div.gmail_extra > *:not(.gmail_quote):not(br)",quoted:"blockquote.gmail_quote",expanded:"div[dir] > div.gmail_extra"};i=["signals_tracked","signals_bcc","signals_template_id"];t.prototype._getParamPattern=function(t,e){var i;null==e&&(e=!1);i=e?"&?":"";return RegExp("("+t+"=)([^\\&]*)"+i,"gi")};t.prototype._replacePostValue=function(t,e){var i,s;s=this._getParamPattern(t);i=encodeURIComponent(e);return this._rawPostData=this._rawPostData.replace(s,"$1"+i)};t.prototype._encodePostData=function(){this._stripCustomParams();if(!this._isDirty)return this._rawPostData;this._parseExpandedThread()?this._parseExpandedThread().outerHTML=this._parseThread().innerHTML:this.isReply()&&this._replacePostValue("uet",this._parseThread().innerHTML);this._replacePostValue("body",this._parseBody().innerHTML);this._isDirty=!1;return this._rawPostData};t.prototype._stripCustomParams=function(){var t,e,s,r;for(t=0,e=i.length;e>t;t++){s=i[t];r=this._getParamPattern(s,!0);this._rawPostData=this._rawPostData.replace(r,"")}};t.prototype._parseQueryString=function(t){var e,i,s,r,n,a,o,h;if(!__isString(t))return{};s=t.indexOf("?");e=t.slice(s+1);a=e.split("&");h={};o=function(t){return function(t){var e,i;t=t.split("=");if((null!=t?t[0]:0)&&""!==t[0]){e=h[t[0]];i=decodeURIComponent(t[1]||"");if(null!=e&&""!==e){if(""===i)return;switch(__isArray(e)){case!0:h[t[0]].push(i);break;case!1:h[t[0]]=[e,i]}}else h[t[0]]=i}}}(this);for(i=0,r=a.length;r>i;i++){n=a[i];o(n)}return JSON.parse(JSON.stringify(h))};t.prototype._parseBody=function(){if(null==this._postData.body)return!1;this._isDirty=!0;this._bodyNode=document.createElement("div");this._bodyNode.innerHTML=this._postData.body;this._parseBody=function(t){return function(){t._isDirty=!0;return t._bodyNode}}(this);return this._bodyNode};t.prototype._parseTrimmed=function(){if(!this.isReply())return!1;this._isDirty=!0;this._trimmedNodes=this._parseThread().querySelectorAll(s.trimmed);this._parseTrimmed=function(t){return function(){t._isDirty=!0;return t._trimmedNodes}}(this);return this._trimmedNodes};t.prototype._parseQuotedReplies=function(){if(!this.isReply())return!1;this._isDirty=!0;this._quotedReplyNodes=this._parseThread().querySelectorAll(s.quoted);this._parseQuotedReplies=function(t){return function(){t._isDirty=!0;return t._quotedReplyNodes}}(this);return this._quotedReplyNodes};t.prototype._parseThread=function(){var t;if(!this.isReply())return!1;this._isDirty=!0;this._threadNode=document.createElement("div");t=this._parseExpandedThread();this._threadNode.innerHTML=(null!=t?t.outerHTML:void 0)||this._postData.uet;this._parseThread=function(t){return function(){t._isDirty=!0;return t._threadNode}}(this);return this._threadNode};t.prototype._parseFrom=function(){return this.getguser()||!1};t.prototype._parseSubject=function(){return null==this._postData.subject?!1:this._postData.subject};t.prototype._parseBCC=function(){if(null==this._postData.bcc)return!1;__isArray(this._postData.bcc)||(""===this._postData.bcc?this._postData.bcc=[]:this._postData.bcc=[this._postData.bcc]);return this._postData.bcc};t.prototype._parseCC=function(){if(null==this._postData.cc)return!1;__isArray(this._postData.cc)||(""===this._postData.cc?this._postData.cc=[]:this._postData.cc=[this._postData.cc]);return this._postData.cc};t.prototype._parseTo=function(){if(null==this._postData.to||""===this._postData.to)return!1;__isArray(this._postData.to)||(""===this._postData.to?this._postData.to=[]:this._postData.to=[this._postData.to]);return this._postData.to};t.prototype._replaceSubject=function(t){if(null==this._postData.subject)return!1;this._postData.subject=t;return this._replacePostValue("subject",t)};t.prototype._addBCC=function(t){var e,i,s;if(null==this._postData.bcc)return!1;this._parseBCC().push(t);i=this._rawPostData.lastIndexOf("&bcc=");e=encodeURIComponent(t);s="&bcc="+e;return this._rawPostData=this._rawPostData.slice(0,i)+s+this._rawPostData.slice(i)};t.prototype._parseExpandedThread=function(){var t;t=this._parseBody()?this._parseBody().querySelector(s.expanded):!1;return t||!1};t.prototype._replaceExistingTrackers=function(t){var e,i,s;for(e=0,i=t.length;i>e;e++){s=t[e];-1===this.existingTrackers.indexOf(s)&&this.existingTrackers.push(s)}};t.prototype.getBody=function(){return this._parseBody()};t.prototype.getTrimmed=function(){return this._parseTrimmed()};t.prototype.getQuotedReplies=function(){return this._parseQuotedReplies()};t.prototype.getThread=function(){return this._parseThread()};t.prototype.getExpandedThread=function(){return this._parseExpandedThread()};t.prototype.getBCC=function(){return this._parseBCC()};t.prototype.getCC=function(){return this._parseCC()};t.prototype.getFrom=function(){return this._parseFrom()};t.prototype.getTo=function(){return this._parseTo()};t.prototype.getSubject=function(){return this._parseSubject()};t.prototype.getExistingTrackers=function(){return this.existingTrackers};t.prototype.setSubject=function(t){this._replaceSubject(t);return this._parseSubject()};t.prototype.addExistingTrackers=function(t){this._replaceExistingTrackers(t);return this.existingTrackers};t.prototype.addBCC=function(t){this._addBCC(t);return this._parseBCC()};t.prototype.isDraft=function(){var t;t=this._url.hasOwnProperty("autosave");this._url.hasOwnProperty("act")&&(t=t||"sd"===this._url.act);return t};t.prototype.isEmail=function(){return null!=this._url.rid&&null!=this._postData.to&&null!=this._postData.body};t.prototype.isBlacklisted=function(){var t,e,i,s,r,n,a,o,h;h=this.getTo();for(e=0,s=h.length;s>e;e++){n=h[e];o=null!=(a=SIG_inject.blacklist)?a.addresses:void 0;for(i=0,r=o.length;r>i;i++){t=o[i];if(n.indexOf(t)>-1)return!0}}return!1};t.prototype.isTracked=function(){var t;t=this._postData.hasOwnProperty("signals_tracked");if(!t){console.debug("Not Tracking Checkbox!");window.postMessage({sender:"SIG_EXTENSION",type:"XHR_NOT_TRACKED"},"*")}return t&&"true"===this._postData.signals_tracked};t.prototype.shouldWrapLinks=function(){var t;t=this._postData.hasOwnProperty("signals_wrap_links");return t&&"true"===this._postData.signals_wrap_links};t.prototype.isHTML=function(){return"1"===this._postData.ishtml};t.prototype.isNewCompose=function(){return null!=this._postData.uet};t.prototype.isReply=function(){return this.isNewCompose()&&this._postData.uet.length>0?!0:this._parseExpandedThread()};t.prototype.getguser=function(){var t,e,i,s;t=(null!=(e=window.GLOBALS)?e[10]:void 0)||(null!=(i=window.gbar)&&null!=(s=i._CONFIG)?s[0][10][5]:void 0);return null!=t?t:this._postData.from};t.prototype.extractEmail=function(t){var e,i;if(!__isString(t))return null;e=/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi;i=t.match(e);return null!=i?i[0]:void 0};t.prototype.getEmailData=function(t){var e;null==t&&(t=!0);e={};if(t){e.from_email=this.getFrom();null!=this._postData.signals_template_id?e.template_id=[""+this._postData.signals_template_id]:e.template_id=[]}e.subject=this.getSubject();e.to=this.getTo();e.cc=this.getCC();e.bcc=this.getBCC();return e};t.prototype.getEncoded=function(t){switch(t){case"url":return this._rawUrl;case"postData":return this._encodePostData()}};return t}()}).call(this);(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};hubspot.define("sidekick.chrome.utils.TrackerUtils",[],function(){var e;return e=function(){function e(){this.generateUUID=t(this.generateUUID,this);this.generateImgTag=t(this.generateImgTag,this);this.generateOpenTrackerURL=t(this.generateOpenTrackerURL,this)}var i,s;s="newtracker='true'";i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";e.prototype.generateOpenTrackerURL=function(t){var e,i,s;i=t.primaryId,s=t.secondaryId,e=t.domain;return e+"?si="+s+"&pi="+i};e.prototype.generateImgTag=function(t,e){var i;null==e&&(e=!1);i=e?s:"";return"<img src='"+t+"' "+i+"\n     style='display:none!important'\n     height='1'\n     width='1'>"};e.prototype.generateUUID=function(){var t,e,s;t=(new Date).getTime();e=function(e){var i;i=(t+16*Math.random())%16|0;t=Math.floor(t/16);return("x"===e?i:7&i|8).toString(16)};return s=i.replace(/[xy]/g,e)};return e}()})}).call(this);