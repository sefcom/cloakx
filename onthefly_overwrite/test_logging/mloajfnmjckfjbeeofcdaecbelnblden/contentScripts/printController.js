window.sru=window.sru||{};
(function(q){function n(d,k,b){if(0==k.length)return"";var a=b?"<div>":"<div class='dji-sru-indent-item'>";for(b=0;b<k.length;b++){var g=k[b],a=a+"<div class='dji-sru-outline-item'>",a=a+"<div class='dji-sru-outline-item-bullet'></div>",a=a+("<div class='dji-sru-outline-item-content'>"+g.body()+"</div>"),h;h=g.sources();for(var p=[],e=void 0,m=void 0,c=void 0,f=void 0,e=void 0,l=0;l<h.length;l++)c=h[l].cslData(),f={},m=null,c?(e=c.author&&0<c.author.length&&""!=c.author[0].family?c.author[0].family:
c["container-title"],c.issued&&c.issued.year&&(m=c.issued.year),f.text=e&&m?e+" "+m:e?e:"...",c.URL&&(f.URL=c.URL)):c||(f.text=h[l].author().split(",")[0]),e=f.URL?"(<a id='"+h[l].uuid()+"' href="+f.URL+">"+f.text+"</a>)":"(<span>"+f.text+"</span>)",p.push(e);h=p.join("");a+="<div class='dji-sru-outline-item-content'>"+h+"</div>";a+="</div>";a+=n(d,d.topics(g),!1)}return a+"</div>"}q.print=function(d,k){dji.ui.effects.enterBusyState();setTimeout(function(){var b=d.isSkeleton()?"Outline Name":d.title(),
a;a="body { -webkit-print-color-adjust: exact; font-family: Helvetica; margin: 15mm 3mm; } .dji-sru-outline-title { margin: 0 0 10mm 3mm; font-size: 18px; font-weight: bold; } .dji-sru-outline-group { margin: 0 0 5mm 3mm; font-size: 16px; font-weight: bold; } .dji-sru-outline-group:not(:first-child) { margin-top: 10mm; } ";a+=".dji-sru-outline-item { position: relative; margin: 0 5mm 2mm 10mm; font-size: 14px; } ";a+=".dji-sru-outline-item .dji-sru-outline-item-bullet { position: absolute; top: 0.5mm; left: -6mm; width: 3mm; height: 3mm; border-radius: 50%; background-color: #000000; } ";
a+=".dji-sru-indent-item { margin-left: 5mm }";a="<html><head><title>"+b+"</title><style>"+a+"</style></head>";a=a+"<body style='background-color: #FFFFFF'>"+("<div class='dji-sru-outline-title'>"+b+"</div>");a+="<div class='dji-sru-outline-group'>Topics</div>";b=d.topics();a+=n(d,b,!0);a+="<div class='dji-sru-outline-group'>Sources</div>";for(var b=d.sources(),g=0;g<b.length;g++)a+="<div class='dji-sru-outline-item'><div class='dji-sru-outline-item-bullet'></div><div class='dji-sru-outline-item-content'>"+
(b[g].text(k)||"generate citation from source.data.fields with style "+k)+"</div></div>";a+="</body></html>";(b=document.getElementById("__dji_sru_print_preview"))?b.contentDocument.body.innerHTML="":(b=document.createElement("iframe"),b.id="__dji_sru_print_preview",b.style.position="fixed",b.style.top="-10000px",b.style.left="-10000px",b.style.width="300px",b.style.height="300px",document.body.appendChild(b));b.contentDocument.open();b.contentDocument.write(a);dji.ui.effects.leaveBusyState();b.contentWindow.focus();
b.contentWindow.print()},0)}})(window.sru.printController=window.sru.printController||{});
