window.sru=window.sru||{};
(function(e){function m(a){d=a||0;a=g.find("mark");b=a.length;var f=c.find(".dji-sru-page-content"),e=f.scrollTop();a.each(function(a){var c="dji-sru-highlight-item"+(d==a?" dji-sru-active":""),b=this.getBoundingClientRect();$("<div/>",{"class":c,"dji-sru-item":a+1}).css({top:b.top-104+e+"px",left:b.left-32+"px",width:b.width+"px",height:b.height+"px"}).appendTo(f)});a=0==b?"&nbsp;":d+1+"/"+b;c.find(".dji-sru-search-in-topics-overlay .dji-sru-search-container .dji-search-result-info").html(a);a=f.find(".dji-sru-highlight-item[dji-sru-item="+
(d+1)+"]");l(a)}function l(a){var f=c.find(".dji-sru-page-content"),b=f.scrollTop(),d=b+20,e=d+f.height()-20,b=a.position().top+b;a=b+a.height();b<d?f.scrollTop(b-20):a>e&&f.scrollTop(a+20)}var h=null,g=null,c=null,d=0,b=0,k="";e.init=function(a){c=$(a);var b;switch(c.find(".dji-sru-page-toolbar .dji-sru-tab-items .dji-sru-tab-item.dji-selected").attr("dji-item")){case "dji-sru-outline-details":b=c.find("ul#u000").clone(!1).removeAttr("id");g=c.find(".dji-sru-page-content .dji-sru-search-in-topics-highlights");
break;case "dji-sru-outline-sources":b=c.find("ul#dji-workaround-s000").clone(!1).removeAttr("id"),g=c.find(".dji-sru-page-content .dji-sru-search-in-sources-highlights")}g.append(b);h=new Mark(g[0])};e.mark=function(a,b){k!=a&&(k=a,b=b||{separateWordSearch:!1},a.toLowerCase(),c.find(".dji-sru-page-content .dji-sru-highlight-item").remove(),h.unmark(),h.mark(k,b),m())};e.highlightPrevSearchItem=function(){if(0!=b&&1!=b){var a=c.find(".dji-sru-page-content");a.find(".dji-sru-highlight-item[dji-sru-item="+
(d+1)+"]").removeClass("dji-sru-active");d--;0>d&&(d=b-1);a=a.find(".dji-sru-highlight-item[dji-sru-item="+(d+1)+"]");a.addClass("dji-sru-active");var e=0==b?"&nbsp;":d+1+"/"+b;c.find(".dji-sru-search-in-topics-overlay .dji-sru-search-container .dji-search-result-info").html(e);l(a)}};e.highlightNextSearchItem=function(){if(0!=b&&1!=b){var a=c.find(".dji-sru-page-content");a.find(".dji-sru-highlight-item[dji-sru-item="+(d+1)+"]").removeClass("dji-sru-active");d++;d==b&&(d=0);a=a.find(".dji-sru-highlight-item[dji-sru-item="+
(d+1)+"]");a.addClass("dji-sru-active");l(a);a=0==b?"&nbsp;":d+1+"/"+b;c.find(".dji-sru-search-in-topics-overlay .dji-sru-search-container .dji-search-result-info").html(a)}};e.reset=function(){c&&(c.find(".dji-sru-page-content .dji-sru-highlight-item").remove(),c.find(".dji-sru-search-in-topics-overlay .dji-sru-search-container .dji-search-result-info").html("&nbsp;"),c=null,k="",h.unmark(),h=null,g.empty(),d=b=0)};e.updatePageHighlight=function(){if(c){var a=c,b=k;e.reset();e.init(a);e.mark(b)}}})(window.sru.searchInOutlineController=
window.sru.searchInOutlineController||{});
