window.jsdapi=window.jsdapi||{};
(function(l){function m(a,b,c){if(a.url){var d=new XMLHttpRequest,k=a.url+n(a.query);d.open(a.method,k,!0);if("arraybuffer"===a.responseType||"binaryToBase64"===a.responseType)d.responseType="arraybuffer";else if("blob"===a.responseType||"binary"===a.responseType)d.responseType="blob";if(b)for(var f in b)b.hasOwnProperty(f)&&b[f]&&d.setRequestHeader(f,b[f]);a.accessToken&&d.setRequestHeader("Authorization","Bearer "+a.accessToken);a.contentType&&d.setRequestHeader("Content-Type",a.contentType);a.timeout&&
(d.timeout=a.timeout);d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE&&0<d.status){var b=null,e=this.status,h=null;if(a.responseHeaders)for(var h={},f=0;f<a.responseHeaders.length;f++)h[a.responseHeaders[f]]=this.getResponseHeader(a.responseHeaders[f]);else h=this.getAllResponseHeaders();if(200===e)if("json"===a.responseType)try{b=JSON.parse(this.responseText)}catch(k){}else b="blob"===a.responseType||"arraybuffer"===a.responseType||"binary"===a.responseType?this.response:"binaryToBase64"===
a.responseType?p(this.response):this.responseText;setTimeout(function(){0==c.length?g(c):1==c.length?g(c,b):2==c.length?g(c,e,b):g(c,e,h,b)},0)}};d.ontimeout=d.onerror=d.onabort=function(){setTimeout(function(){0==c.length?g(c):1==c.length?g(c,void 0):2==c.length?g(c,d.status,void 0):g(c,d.status,void 0,void 0)},0)};a.content?d.send(a.content):d.send()}else g(c,null,10)}var k={};l.setup=function(a){if(a&&a.headers)for(var b in a.headers)a.headers.hasOwnProperty(b)&&a.headers[b]&&(k[b]=a.headers[b])};
l.sendRequest=function(a,b){var c=a.headers||{},d;for(d in k)k.hasOwnProperty(d)&&!c.hasOwnProperty(d)&&(c[d]=k[d]);m(a,c,b)};var n=function(a){var b="";if(void 0!==a&&null!==a)for(var c in a)a.hasOwnProperty(c)&&(b=""===b?"?":b+"&",b=b+encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},p=function(a){var b="";a=new Uint8Array(a);for(var c=a.byteLength,d=c%3,c=c-d,g,f,k,e,h=0;h<c;h+=3)e=a[h]<<16|a[h+1]<<8|a[h+2],g=(e&16515072)>>18,f=(e&258048)>>12,k=(e&4032)>>6,e&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e];1==d?(e=a[c],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&3)<<4]+"=="):2==d&&(e=a[c]<<8|a[c+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&
1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(e&15)<<2]+"=");return b},g=function(a){if(a)try{a.apply(this,[].slice.call(arguments).splice(1))}catch(b){dji.logger.error(b)}}})(window.jsdapi.http=window.jsdapi.http||{});
